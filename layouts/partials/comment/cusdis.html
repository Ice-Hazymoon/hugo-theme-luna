{{- $cdn := "" -}}
{{- if and .Site.Params.publicPath (not .Site.IsServer) -}}
{{- $cdn = .Site.Params.publicPath -}}
{{- end -}}

<script>
    // CUSDIS
    window.CUSDIS_LOCALE = {
        powered_by: '评论由 Cusdis 提供',
        post_comment: '发送',
        loading: '加载中',
    
        // comment
        email: '邮箱地址 (可选)',
        nickname: '昵称',
        reply_placeholder: '回复内容...',
        reply_btn: '回复',
        sending: '发送中...',
    
        // reply
        mod_badge: '管理员',
        content_is_required: '内容不能为空',
        nickname_is_required: '昵称不能为空',
    
        comment_has_been_sent:
        '评论已发送，管理员审核通过后会展示',
    }
</script>

{{- $cusdisScript := resources.Get "modules/cusdis.js" | js.Build (dict "minify" hugo.IsProduction) -}}
{{- if .Site.IsServer -}}
    <script type="text/javascript" src="{{- $cusdisScript.RelPermalink -}}" defer></script>
{{- else -}}
    {{- $cusdisScript := $cusdisScript | fingerprint -}}
    <script type="text/javascript" src="{{- print $cdn $cusdisScript.RelPermalink -}}" defer integrity="{{ $cusdisScript.Data.Integrity }}"></script>
{{- end -}}